function arrayFrom(a,b){return!b&&a instanceof Array?a:Array.prototype.slice.call(a)}function defined(a,b){return void 0!==a?a:b}function jDataView(a,b,c,d){if(a instanceof jDataView){var e=a.slice(b,b+c);return e._littleEndian=defined(d,e._littleEndian),e}if(!(this instanceof jDataView))return new jDataView(a,b,c,d);if(this.buffer=a=jDataView.wrapBuffer(a),this._isArrayBuffer=compatibility.ArrayBuffer&&a instanceof ArrayBuffer,this._isPixelData=BROWSER&&compatibility.PixelData&&a instanceof CanvasPixelArray,this._isDataView=compatibility.DataView&&this._isArrayBuffer,this._isNodeBuffer=NODE&&compatibility.NodeBuffer&&a instanceof Buffer,!(NODE&&this._isNodeBuffer||this._isArrayBuffer||BROWSER&&this._isPixelData||a instanceof Array))throw new TypeError("jDataView buffer has an incompatible type");this._littleEndian=!!d;var f="byteLength"in a?a.byteLength:a.length;this.byteOffset=b=defined(b,0),this.byteLength=c=defined(c,f-b),this._offset=this._bitOffset=0,this._isDataView?this._view=new DataView(a,b,c):this._checkBounds(b,c,f),this._engineAction=this._isDataView?this._dataViewAction:NODE&&this._isNodeBuffer?this._nodeBufferAction:this._isArrayBuffer?this._arrayBufferAction:this._arrayAction}function getCharCodes(a){if(NODE&&compatibility.NodeBuffer)return new Buffer(a,"binary");for(var b=compatibility.ArrayBuffer?Uint8Array:Array,c=new b(a.length),d=0,e=a.length;e>d;d++)c[d]=255&a.charCodeAt(d);return c}function pow2(a){return a>=0&&31>a?1<<a:pow2[a]||(pow2[a]=Math.pow(2,a))}function Uint64(a,b){this.lo=a,this.hi=b}function Int64(){Uint64.apply(this,arguments)}var compatibility={NodeBuffer:NODE&&"Buffer"in global,DataView:"DataView"in global,ArrayBuffer:"ArrayBuffer"in global,PixelData:BROWSER&&"CanvasPixelArray"in global&&"ImageData"in global&&"document"in global},TextEncoder=global.TextEncoder,TextDecoder=global.TextDecoder;if(NODE&&compatibility.NodeBuffer&&!function(a){try{a.writeFloatLE(1/0,0)}catch(b){compatibility.NodeBuffer=!1}}(new Buffer(4)),BROWSER&&compatibility.PixelData){var createPixelData=function(a,b){var c=createPixelData.context2d.createImageData((a+3)/4,1).data;if(c.byteLength=a,void 0!==b)for(var d=0;a>d;d++)c[d]=b[d];return c};createPixelData.context2d=document.createElement("canvas").getContext("2d")}var dataTypes={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};jDataView.wrapBuffer=function(a){switch(typeof a){case"number":if(NODE&&compatibility.NodeBuffer)a=new Buffer(a),a.fill(0);else if(compatibility.ArrayBuffer)a=new Uint8Array(a).buffer;else if(BROWSER&&compatibility.PixelData)a=createPixelData(a);else{a=new Array(a);for(var b=0;b<a.length;b++)a[b]=0}return a;case"string":a=getCharCodes(a);default:return"length"in a&&!(NODE&&compatibility.NodeBuffer&&a instanceof Buffer||compatibility.ArrayBuffer&&a instanceof ArrayBuffer||BROWSER&&compatibility.PixelData&&a instanceof CanvasPixelArray)&&(NODE&&compatibility.NodeBuffer?a=new Buffer(a):compatibility.ArrayBuffer?a instanceof ArrayBuffer||(a=new Uint8Array(a).buffer,a instanceof ArrayBuffer||(a=new Uint8Array(arrayFrom(a,!0)).buffer)):a=BROWSER&&compatibility.PixelData?createPixelData(a.length,a):arrayFrom(a)),a}},jDataView.createBuffer=function(){return jDataView.wrapBuffer(arguments)},jDataView.Uint64=Uint64,Uint64.prototype={valueOf:function(){return this.lo+pow2(32)*this.hi},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments)}},Uint64.fromNumber=function(a){var b=Math.floor(a/pow2(32)),c=a-b*pow2(32);return new Uint64(c,b)},jDataView.Int64=Int64,Int64.prototype="create"in Object?Object.create(Uint64.prototype):new Uint64,Int64.prototype.valueOf=function(){return this.hi<pow2(31)?Uint64.prototype.valueOf.apply(this,arguments):-(pow2(32)-this.lo+pow2(32)*(pow2(32)-1-this.hi))},Int64.fromNumber=function(a){var b,c;if(a>=0){var d=Uint64.fromNumber(a);b=d.lo,c=d.hi}else c=Math.floor(a/pow2(32)),b=a-c*pow2(32),c+=pow2(32);return new Int64(b,c)};var proto=jDataView.prototype={compatibility:compatibility,_checkBounds:function(a,b,c){if("number"!=typeof a)throw new TypeError("Offset is not a number.");if("number"!=typeof b)throw new TypeError("Size is not a number.");if(0>b)throw new RangeError("Length is negative.");if(0>a||a+b>defined(c,this.byteLength))throw new RangeError("Offsets are out of bounds.")},_action:function(a,b,c,d,e){return this._engineAction(a,b,defined(c,this._offset),defined(d,this._littleEndian),e)},_dataViewAction:function(a,b,c,d,e){return this._offset=c+dataTypes[a],b?this._view["get"+a](c,d):this._view["set"+a](c,e,d)},_arrayBufferAction:function(a,b,c,d,e){var f,g=dataTypes[a],h=global[a+"Array"];if(d=defined(d,this._littleEndian),1===g||(this.byteOffset+c)%g===0&&d)return f=new h(this.buffer,this.byteOffset+c,1),this._offset=c+g,b?f[0]:f[0]=e;var i=new Uint8Array(b?this.getBytes(g,c,d,!0):g);return f=new h(i.buffer,0,1),b?f[0]:(f[0]=e,void this._setBytes(c,i,d))},_arrayAction:function(a,b,c,d,e){return b?this["_get"+a](c,d):this["_set"+a](c,e,d)},_getBytes:function(a,b,c){c=defined(c,this._littleEndian),b=defined(b,this._offset),a=defined(a,this.byteLength-b),this._checkBounds(b,a),b+=this.byteOffset,this._offset=b-this.byteOffset+a;var d=this._isArrayBuffer?new Uint8Array(this.buffer,b,a):(this.buffer.slice||Array.prototype.slice).call(this.buffer,b,b+a);return c||1>=a?d:arrayFrom(d).reverse()},getBytes:function(a,b,c,d){var e=this._getBytes(a,b,defined(c,!0));return d?arrayFrom(e):e},_setBytes:function(a,b,c){var d=b.length;if(0!==d){if(c=defined(c,this._littleEndian),a=defined(a,this._offset),this._checkBounds(a,d),!c&&d>1&&(b=arrayFrom(b,!0).reverse()),a+=this.byteOffset,this._isArrayBuffer)new Uint8Array(this.buffer,a,d).set(b);else if(NODE&&this._isNodeBuffer)new Buffer(b).copy(this.buffer,a);else for(var e=0;d>e;e++)this.buffer[a+e]=b[e];this._offset=a-this.byteOffset+d}},setBytes:function(a,b,c){this._setBytes(a,b,defined(c,!0))},getString:function(a,b,c){if(NODE&&this._isNodeBuffer)return b=defined(b,this._offset),a=defined(a,this.byteLength-b),this._checkBounds(b,a),this._offset=b+a,this.buffer.toString(c||"binary",this.byteOffset+b,this.byteOffset+this._offset);var d=this._getBytes(a,b,!0);if(c="utf8"===c?"utf-8":c||"binary",TextDecoder&&"binary"!==c)return new TextDecoder(c).decode(this._isArrayBuffer?d:new Uint8Array(d));var e="";a=d.length;for(var f=0;a>f;f++)e+=String.fromCharCode(d[f]);return"utf-8"===c&&(e=decodeURIComponent(escape(e))),e},setString:function(a,b,c){if(NODE&&this._isNodeBuffer)return a=defined(a,this._offset),this._checkBounds(a,b.length),void(this._offset=a+this.buffer.write(b,this.byteOffset+a,c||"binary"));c="utf8"===c?"utf-8":c||"binary";var d;TextEncoder&&"binary"!==c?d=new TextEncoder(c).encode(b):("utf-8"===c&&(b=unescape(encodeURIComponent(b))),d=getCharCodes(b)),this._setBytes(a,d,!0)},getChar:function(a){return this.getString(1,a)},setChar:function(a,b){this.setString(a,b)},tell:function(){return this._offset},seek:function(a){return this._checkBounds(a,0),this._offset=a},skip:function(a){return this.seek(this._offset+a)},slice:function(a,b,c){function d(a,b){return 0>a?a+b:a}return a=d(a,this.byteLength),b=d(defined(b,this.byteLength),this.byteLength),c?new jDataView(this.getBytes(b-a,a,!0,!0),void 0,void 0,this._littleEndian):new jDataView(this.buffer,this.byteOffset+a,b-a,this._littleEndian)},alignBy:function(a){return this._bitOffset=0,1!==defined(a,1)?this.skip(a-(this._offset%a||a)):this._offset},_getFloat64:function(a,b){var c=this._getBytes(8,a,b),d=1-2*(c[7]>>7),e=((c[7]<<1&255)<<3|c[6]>>4)-1023,f=(15&c[6])*pow2(48)+c[5]*pow2(40)+c[4]*pow2(32)+c[3]*pow2(24)+c[2]*pow2(16)+c[1]*pow2(8)+c[0];return 1024===e?0!==f?0/0:1/0*d:-1023===e?d*f*pow2(-1074):d*(1+f*pow2(-52))*pow2(e)},_getFloat32:function(a,b){var c=this._getBytes(4,a,b),d=1-2*(c[3]>>7),e=(c[3]<<1&255|c[2]>>7)-127,f=(127&c[2])<<16|c[1]<<8|c[0];return 128===e?0!==f?0/0:1/0*d:-127===e?d*f*pow2(-149):d*(1+f*pow2(-23))*pow2(e)},_get64:function(a,b,c){c=defined(c,this._littleEndian),b=defined(b,this._offset);for(var d=c?[0,4]:[4,0],e=0;2>e;e++)d[e]=this.getUint32(b+d[e],c);return this._offset=b+8,new a(d[0],d[1])},getInt64:function(a,b){return this._get64(Int64,a,b)},getUint64:function(a,b){return this._get64(Uint64,a,b)},_getInt32:function(a,b){var c=this._getBytes(4,a,b);return c[3]<<24|c[2]<<16|c[1]<<8|c[0]},_getUint32:function(a,b){return this._getInt32(a,b)>>>0},_getInt16:function(a,b){return this._getUint16(a,b)<<16>>16},_getUint16:function(a,b){var c=this._getBytes(2,a,b);return c[1]<<8|c[0]},_getInt8:function(a){return this._getUint8(a)<<24>>24},_getUint8:function(a){return this._getBytes(1,a)[0]},_getBitRangeData:function(a,b){var c=(defined(b,this._offset)<<3)+this._bitOffset,d=c+a,e=c>>>3,f=d+7>>>3,g=this._getBytes(f-e,e,!0),h=0;(this._bitOffset=7&d)&&(this._bitOffset-=8);for(var i=0,j=g.length;j>i;i++)h=h<<8|g[i];return{start:e,bytes:g,wideValue:h}},getSigned:function(a,b){var c=32-a;return this.getUnsigned(a,b)<<c>>c},getUnsigned:function(a,b){var c=this._getBitRangeData(a,b).wideValue>>>-this._bitOffset;return 32>a?c&~(-1<<a):c},_setBinaryFloat:function(a,b,c,d,e){var f,g,h=0>b?1:0,i=~(-1<<d-1),j=1-i;0>b&&(b=-b),0===b?(f=0,g=0):isNaN(b)?(f=2*i+1,g=1):1/0===b?(f=2*i+1,g=0):(f=Math.floor(Math.log(b)/Math.LN2),f>=j&&i>=f?(g=Math.floor((b*pow2(-f)-1)*pow2(c)),f+=i):(g=Math.floor(b/pow2(j-c)),f=0));for(var k=[];c>=8;)k.push(g%256),g=Math.floor(g/256),c-=8;for(f=f<<c|g,d+=c;d>=8;)k.push(255&f),f>>>=8,d-=8;k.push(h<<d|f),this._setBytes(a,k,e)},_setFloat32:function(a,b,c){this._setBinaryFloat(a,b,23,8,c)},_setFloat64:function(a,b,c){this._setBinaryFloat(a,b,52,11,c)},_set64:function(a,b,c,d){c instanceof a||(c=a.fromNumber(c)),d=defined(d,this._littleEndian),b=defined(b,this._offset);var e=d?{lo:0,hi:4}:{lo:4,hi:0};for(var f in e)this.setUint32(b+e[f],c[f],d);this._offset=b+8},setInt64:function(a,b,c){this._set64(Int64,a,b,c)},setUint64:function(a,b,c){this._set64(Uint64,a,b,c)},_setUint32:function(a,b,c){this._setBytes(a,[255&b,b>>>8&255,b>>>16&255,b>>>24],c)},_setUint16:function(a,b,c){this._setBytes(a,[255&b,b>>>8&255],c)},_setUint8:function(a,b){this._setBytes(a,[255&b])},setUnsigned:function(a,b,c){var d=this._getBitRangeData(c,a),e=d.wideValue,f=d.bytes;e&=~(~(-1<<c)<<-this._bitOffset),e|=(32>c?b&~(-1<<c):b)<<-this._bitOffset;for(var g=f.length-1;g>=0;g--)f[g]=255&e,e>>>=8;this._setBytes(d.start,f,!0)}};if(NODE){var nodeNaming={Int8:"Int8",Int16:"Int16",Int32:"Int32",Uint8:"UInt8",Uint16:"UInt16",Uint32:"UInt32",Float32:"Float",Float64:"Double"};proto._nodeBufferAction=function(a,b,c,d,e){this._offset=c+dataTypes[a];var f=nodeNaming[a]+("Int8"===a||"Uint8"===a?"":d?"LE":"BE");return c+=this.byteOffset,b?this.buffer["read"+f](c):this.buffer["write"+f](e,c)}}for(var type in dataTypes)!function(a){proto["get"+a]=function(b,c){return this._action(a,!0,b,c)},proto["set"+a]=function(b,c,d){this._action(a,!1,b,d,c)}}(type);proto._setInt32=proto._setUint32,proto._setInt16=proto._setUint16,proto._setInt8=proto._setUint8,proto.setSigned=proto.setUnsigned;for(var method in proto)"set"===method.slice(0,3)&&!function(a){proto["write"+a]=function(){Array.prototype.unshift.call(arguments,void 0),this["set"+a].apply(this,arguments)}}(method.slice(3));