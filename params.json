{
  "name": "Wampy.js",
  "tagline": "Simple WAMP (WebSocket Application Messaging Protocol) Javascript client-side implementation",
  "body": "wampy.js\r\n========\r\n\r\nSimple WAMP (WebSocket Application Messaging Protocol) Javascript client-side implementation\r\n\r\n[![NPM version][npm-image]][npm-url]\r\n[![Build Status][travis-image]][travis-url]\r\n[![Code coverage][coveralls-image]][coveralls-url]\r\n[![Dependency Status][depstat-image]][depstat-url]\r\n[![DevDependency Status][depstat-dev-image]][depstat-dev-url]\r\n[![MIT License][license-image]][license-url]\r\n\r\n[![Gitter Chat][gitter-image]][gitter-url]\r\n\r\nTable of Contents\r\n=================\r\n\r\n* [Description](#description)\r\n* [Usage example](#usage-example)\r\n* [Installation](#installation)\r\n* [Updating versions](#updating-versions)\r\n* [Challenge Response Authentication](#challenge-response-authentication)\r\n* [API](#api)\r\n    * [Constructor](#constructorurl-options)\r\n    * [options](#optionsopts)\r\n    * [getOpStatus](#getopstatus)\r\n    * [getSessionId](#getsessionid)\r\n    * [connect](#connecturl)\r\n    * [disconnect](#disconnect)\r\n    * [abort](#abort)\r\n    * [subscribe](#subscribetopicuri-callbacks)\r\n    * [unsubscribe](#unsubscribetopicuri-callbacks)\r\n    * [publish](#publishtopicuri-payload-callbacks-advancedoptions)\r\n    * [call](#calltopicuri-payload-callbacks-advancedoptions)\r\n    * [cancel](#cancelreqid-callbacks-advancedoptions)\r\n    * [register](#registertopicuri-callbacks)\r\n    * [unregister](#unregistertopicuri-callbacks)\r\n* [Quick comparison to other libs](#quick-comparison-to-other-libs)\r\n* [Tests and code coverage](#tests-and-code-coverage)\r\n* [Copyright and License](#copyright-and-license)\r\n* [See Also](#see-also)\r\n\r\nDescription\r\n===========\r\n\r\nWampy.js is javascript library, that runs both in browser and node.js enviroments. It implements [WAMP][] v2 specification on top of\r\nWebSocket object, also provides additional features like autoreconnecting and use of Chaining Pattern.\r\nIt has no external dependencies (by default) and is easy to use. Also it's compatible with AMD and browserify.\r\n\r\nWampy.js supports next WAMP roles and features:\r\n\r\n* Challenge Response Authentication (wampcra method)\r\n* publisher: advanced profile with features:\r\n    * subscriber blackwhite listing\r\n    * publisher exclusion\r\n    * publisher identification\r\n* subscriber: basic profile\r\n* caller: advanced profile with features:\r\n    * caller identification\r\n    * progressive call results\r\n    * call canceling\r\n    * call timeout\r\n* callee:\r\n    * caller identification\r\n\r\nWampy default serializer is JSON, but it also supports msgpack as serializer.\r\nIn that case you need to include msgpack5.js as dependency. See [msgpack5][] for more info.\r\n\r\nFor WAMP v1 implementation, please see tag v0.1.0.\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nUsage example\r\n=============\r\n\r\n```javascript\r\nvar ws = new Wampy('/ws/', { realm: 'AppRealm' });\r\nws.subscribe('system.monitor.update', function (data) { console.log('Received system.monitor.update event!'); })\r\n  .subscribe('client.message', function (data) { console.log('Received client.message event!'); })\r\n\r\nws.call('get.server.time', null, {\r\n    onSuccess: function (stime) {\r\n        console.log('RPC successfully called');\r\n        console.log('Server time is ' + stime);\r\n    },\r\n    onError: function (err) {\r\n        console.log('RPC call failed with error ' + err);\r\n    }\r\n});\r\n\r\n// Somewhere else for example\r\nws.publish('system.monitor.update');\r\n\r\nws.publish('client.message', 'Hi guys!');\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nInstallation\r\n============\r\n\r\nWampy.js can be installed using bower or npm or just by file-copy :)\r\n\r\n```bash\r\n> bower install wampy.js\r\n# Or\r\n> npm install wampy\r\n```\r\n\r\nTo use Wampy simply add wampy-all.min.js file to your page. It contains msgpack encoder plus wampy itself.\r\n\r\n```html\r\n<script src=\"wampy-all.min.js\"></script>\r\n```\r\n\r\nIn case, you don't plan to use msgpack, just include clean wampy.min.js.\r\n\r\n```html\r\n<script src=\"wampy.min.js\"></script>\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nUpdating versions\r\n=================\r\n\r\nPlease refer to [Migrating.md](Migrating.md) for instructions on upgrading major versions.\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nChallenge Response Authentication\r\n=================================\r\n\r\nWampy.js supports challenge response authentication. To use it you need to provide authid and onChallenge callback\r\nas wampy instance options. Also Wampy.js supports \"wampcra\" authentication method with a little helper\r\nplugin \"[wampy-cra][]\". Just add \"wampy-cra\" package and use provided methods as shown below.\r\n\r\n```javascript\r\n'use strict';\r\n\r\nconst Wampy = require('wampy');\r\nconst wampyCra = require('wampy-cra');\r\nconst w3cws = require('websocket').w3cwebsocket;\r\nlet ws;\r\n\r\n/**\r\n * Manual authentication using signed message\r\n */\r\nws = new Wampy('ws://wamp.router.url', {\r\n    ws: w3cws,\r\n    realm: 'realm1',\r\n    authid: 'joe',\r\n    onChallenge: (method, info) => {\r\n        console.log('Requested challenge with ', method, info);\r\n        return wampyCra.sign('joe secret key or password', info.challenge);\r\n    },\r\n    onConnect: () => {\r\n        console.log('Connected to Router!');\r\n    }\r\n});\r\n\r\n/**\r\n * Promise-based manual authentication using signed message\r\n */\r\nws = new Wampy('ws://wamp.router.url', {\r\n    ws: w3cws,\r\n    realm: 'realm1',\r\n    authid: 'micky',\r\n    onChallenge: (method, info) => {\r\n        return new Promise((resolve, reject) => {\r\n            setTimeout(() => {\r\n                console.log('Requested challenge with ', method, info);\r\n                resolve(wampyCra.sign('micky secret key or password', info.challenge));\r\n            }, 2000);\r\n        });\r\n    },\r\n    onConnect: () => {\r\n        console.log('Connected to Router!');\r\n    }\r\n});\r\n\r\n/**\r\n * Manual authentication using salted key and pbkdf2 scheme\r\n */\r\nws = new Wampy('ws://wamp.router.url', {\r\n    ws: w3cws,\r\n    realm: 'realm1',\r\n    authid: 'peter',\r\n    onChallenge: (method, info) => {\r\n        const iterations = 100;\r\n        const keylen = 16;\r\n        const salt = 'password salt for user peter';\r\n\r\n        console.log('Requested challenge with ', method, info);\r\n        return wampyCra.sign(wampyCra.derive_key('peter secret key or password', salt, iterations, keylen), info.challenge);\r\n    },\r\n    onConnect: () => {\r\n        console.log('Connected to Router!');\r\n    }\r\n});\r\n\r\n/**\r\n * Automatic method detection authentication\r\n */\r\nws = new Wampy('ws://wamp.router.url', {\r\n    ws: w3cws,\r\n    realm: 'realm1',\r\n    authid: 'patrik',\r\n    onChallenge: wampyCra.auto('patrik secret key or password'),\r\n    onConnect: () => {\r\n        console.log('Connected to Router!');\r\n    }\r\n});\r\n\r\n/**\r\n * Promise-based automatic method detection authentication\r\n */\r\nws = new Wampy('ws://wamp.router.url', {\r\n    ws: w3cws,\r\n    realm: 'realm1',\r\n    authid: 'vanya',\r\n    onChallenge: (method, info) => {\r\n        return new Promise((resolve, reject) => {\r\n            setTimeout(() => {\r\n                console.log('Requested challenge with ', method, info);\r\n                resolve(wampyCra.auto('vanya secret key or password')(method, info));\r\n            }, 2000);\r\n        });\r\n    },\r\n    onConnect: () => {\r\n        console.log('Connected to Router!');\r\n    }\r\n});\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nAPI\r\n===\r\n\r\nBelow is a description of exposed public API. Btw, wampy has a type definitions, available at [DefinitelyTyped.org][].\r\n\r\nConstructor([url[, options]])\r\n------------------------------------------\r\n\r\nWampy constructor can take 2 parameters:\r\n\r\n* **url** to wamp server - optional. If its undefined, page-schema://page-server:page-port/ws will be used.\r\nCan be in forms of:\r\n    * fully qualified url: schema://server:port/path\r\n    * server:port/path. In this case page schema will be used.\r\n    * /path. In this case page schema, server, port will be used.\r\n* **options** hash-table. The only required field is `realm`. For node.js enviroment also necessary to\r\nspecify `ws` - websocket module. See description below.\r\n\r\n```javascript\r\n// in browser\r\nws = new Wampy();\r\nws = new Wampy('/my-socket-path');\r\nws = new Wampy('ws://socket.server.com:5000/ws', { autoReconnect: false });\r\nws = new Wampy({ reconnectInterval: 1*1000 });\r\n\r\n// in node.js\r\nw3cws = require('websocket').w3cwebsocket;\r\nws = new Wampy(null, { ws: w3cws });\r\nws = new Wampy('/my-socket-path', { ws: w3cws });\r\nws = new Wampy('ws://socket.server.com:5000/ws', { autoReconnect: false, ws: w3cws });\r\nws = new Wampy({ reconnectInterval: 1*1000, ws: w3cws });\r\n\r\n```\r\n\r\nJson serializer will be used by default. If you want to use msgpack encoder, pass it through options,\r\nand set encoding type to 'msgpack'.\r\n\r\n```javascript\r\n// in browser\r\nws = new Wampy('ws://socket.server.com:5000/ws', {\r\n    transportEncoding: 'msgpack',\r\n    msgpackCoder: msgpack5\r\n});\r\nws = new Wampy({\r\n    transportEncoding: 'msgpack',\r\n    msgpackCoder: msgpack5\r\n});\r\n\r\n// in node.js\r\nw3cws = require('websocket').w3cwebsocket;\r\nmsgpack = require('msgpack5')();\r\nws = new Wampy('ws://socket.server.com:5000/ws', {\r\n    ws: w3cws,\r\n    transportEncoding: 'msgpack',\r\n    msgpackCoder: msgpack\r\n});\r\nws = new Wampy({\r\n    ws: w3cws,\r\n    transportEncoding: 'msgpack',\r\n    msgpackCoder: msgpack\r\n});\r\n\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\noptions([opts])\r\n---------------\r\n\r\n.options() method can be called in two forms:\r\n\r\n* without parameters it will return current options\r\n* with one parameter as hash-table it will set new options. Support chaining.\r\n\r\nOptions attributes description:\r\n\r\n* **autoReconnect**. Default value: true. Enable autoreconnecting. In case of connection failure, Wampy will\r\ntry to reconnect to WAMP server, and if you were subscribed to any topics,\r\nor had registered some procedures, Wampy will resubscribe to that topics and reregister procedures.\r\n* **reconnectInterval**. Default value: 2000 (ms). Reconnection Interval in ms.\r\n* **maxRetries**. Default value: 25. Max reconnection attempts. After reaching this value [.disconnect()](#disconnect)\r\nwill be called\r\n* **transportEncoding**. Default value: json. Transport serializer to use. Supports 2 values: json|msgpack.\r\nFor using msgpack you need to provide [msgpack5][] javascript library, set up **msgpackCoder** option, and wamp server,\r\nthat also supports it.\r\n* **realm**. Default value: null. WAMP Realm to join on server. See WAMP spec for additional info.\r\n* **helloCustomDetails**. Default value: null. Custom attributes to send to router on hello.\r\n* **onChallenge**. Default value: null. Callback function.\r\nIs fired when wamp server requests authentication during session establishment.\r\nThis function receives two arguments: auth method ('wampcra' for now only) and challenge details.\r\nFunction should return computed signature, based on challenge details.\r\nSee [Challenge Response Authentication](#challenge-response-authentication) section and [WAMP Spec CRA][] for more info.\r\n* **authid**. Default value: null. Authentication (user) id to use in challenge.\r\n* **onConnect**. Default value: null. Callback function. Fired when connection to wamp server is established.\r\n* **onClose**. Default value: null. Callback function. Fired on closing connection to wamp server.\r\n* **onError**. Default value: null. Callback function. Fired on error in websocket communication.\r\n* **onReconnect**. Default value: null. Callback function. Fired every time on reconnection attempt.\r\n* **onReconnectSuccess**. Default value: null. Callback function. Fired every time when reconnection succeeded.\r\n* **ws**. Default value: null. User provided WebSocket class. Useful in node enviroment.\r\n* **msgpackCoder**. Default value: null. User provided msgpack class. Useful if you plan to use msgpack encoder\r\ninstead of default json. Teoretically, any msgpack encoder with encode/decode methods should work.\r\nIn practice, [msgpack5][] tested and works well with [Wiola][], [msgpack-lite](https://github.com/kawanet/msgpack-lite)\r\ndoesn't work as expected. Feel free to research other variants.\r\n\r\n```javascript\r\nws.options();\r\n\r\nws.options({\r\n    reconnectInterval: 1000,\r\n    maxRetries: 999,\r\n    onConnect: function () { console.log('Yahoo! We are online!'); },\r\n    onClose: function () { console.log('See you next time!'); },\r\n    onError: function () { console.log('Breakdown happened'); },\r\n    onReconnect: function () { console.log('Reconnecting...'); },\r\n    onReconnectSuccess: function () { console.log('Reconnection succeeded...'); }\r\n});\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\ngetOpStatus()\r\n---------------\r\n\r\nReturns the status of last operation. Wampy is developed in a such way, that every operation returns **this** even\r\nin case of error to suport chaining. But if you want to know status of last operation, you can call .getOpStatus().\r\nThis method returns an object with 2 or 3 attributes: code and description and possible request ID .\r\nCode is integer, and value > 0 means error.\r\nDescription is a description of code.\r\nRequest ID is integer and may be useful in some cases (call canceling for example).\r\n\r\n```javascript\r\nws.publish('system.monitor.update');\r\nws.getOpStatus();\r\n// may return { code: 1, description: \"Topic URI doesn't meet requirements!\" }\r\n// or { code: 2, description: \"Server doesn't provide broker role!\" }\r\n// or { code: 0, description: \"Success!\", reqId: 1565723572 }\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\ngetSessionId()\r\n---------------\r\n\r\nReturns the WAMP Session ID.\r\n\r\n```javascript\r\nws.getSessionId();\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nconnect([url])\r\n---------------------------\r\n\r\nConnects to wamp server. **url** parameter is the same as specified in [Constructor](#constructor).\r\nSupports chaining.\r\n\r\n```javascript\r\nws.connect();\r\nws.connect('/my-socket-path');\r\nws.connect('wss://socket.server.com:5000/ws');\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\ndisconnect()\r\n------------\r\n\r\nDisconnects from wamp server. Clears all queues, subscription, calls. Supports chaining.\r\n\r\n```javascript\r\nws.disconnect();\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nabort()\r\n------------\r\n\r\nAborts WAMP session and closes a websocket connection.  Supports chaining.\r\nIf it is called on handshake stage - it sends a abort message to wamp server (as described in spec).\r\nAlso clears all queues, subscription, calls. Supports chaining.\r\n\r\n```javascript\r\nws.abort();\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nsubscribe(topicURI, callbacks)\r\n-----------------------------\r\n\r\nSubscribes for topicURI events. Supports chaining.\r\n\r\nParameters:\r\n\r\n* **topicURI**. Required. A string that identifies the topic.\r\nMust meet a WAMP Spec URI requirements.\r\n* **callbacks**. If it is a function - it will be treated as published event callback\r\n             or it can be hash table of callbacks:\r\n\r\n           { onSuccess: will be called when subscribe would be confirmed\r\n             onError: will be called if subscribe would be aborted\r\n             onEvent: will be called on receiving published event }\r\n\r\n```javascript\r\nws.subscribe('chat.message.received', function (msg) { console.log('Received new chat message!'); });\r\n\r\nws.subscribe('some.another.topic', {\r\n   onSuccess: function () { console.log('Successfully subscribed to topic'); },\r\n   onError: function (err) { console.log('Subscription error:' + err); },\r\n   onEvent: function (data) { console.log('Received topic event'); }\r\n});\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nunsubscribe(topicURI[, callbacks])\r\n-------------------------------\r\n\r\nUnsubscribe from topicURI events. Supports chaining.\r\n\r\nParameters:\r\n\r\n* **topicURI**. Required. A string that identifies the topic.\r\nMust meet a WAMP Spec URI requirements.\r\n* **callbacks**. If it is a function - it will be treated as published event callback to remove\r\n             or it can be hash table of callbacks:\r\n\r\n           { onSuccess: will be called when unsubscribe would be confirmed\r\n             onError: will be called if unsubscribe would be aborted\r\n             onEvent: published event callback to remove }\r\nor it can be not specified, in this case all callbacks and subscription will be removed.\r\n\r\n```javascript\r\nvar f1 = function (data) { ... };\r\nws.unsubscribe('subscribed.topic', f1);\r\n\r\nws.unsubscribe('chat.message.received');\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\npublish(topicURI[, payload[, callbacks[, advancedOptions]]])\r\n-----------------------------------------------\r\n\r\nPublish a new event to topic. Supports chaining.\r\n\r\nParameters:\r\n\r\n* **topicURI**. Required. A string that identifies the topic.\r\nMust meet a WAMP Spec URI requirements.\r\n* **payload**. Publishing event data. Optional. May be any single value or array or hash-table object or null.\r\n* **callbacks**. Optional hash table of callbacks:\r\n\r\n           { onSuccess: will be called when publishing would be confirmed\r\n             onError: will be called if publishing would be aborted }\r\n* **advancedOptions**. Optional parameter. Must include any or all of the options:\r\n\r\n           { exclude:    integer|array WAMP session id(s) that won't receive a published event,\r\n                         even though they may be subscribed\r\n             exclude_authid: string|array Authentication id(s) that won't receive\r\n                         a published event, even though they may be subscribed\r\n             exclude_authrole: string|array Authentication role(s) that won't receive\r\n                         a published event, even though they may be subscribed\r\n             eligible: integer|array WAMP session id(s) that are allowed to receive a published event\r\n             eligible_authid: string|array Authentication id(s) that are allowed to receive a published event\r\n             eligible_authrole: string|array Authentication role(s) that are allowed\r\n                         to receive a published event\r\n             exclude_me: bool flag of receiving publishing event by initiator\r\n                         (if it is subscribed to this topic)\r\n             disclose_me: bool flag of disclosure of publisher identity (its WAMP session ID)\r\n                         to receivers of a published event }\r\n\r\n```javascript\r\nws.publish('user.logged.in');\r\nws.publish('chat.message.received', 'user message');\r\nws.publish('chat.message.received', ['user message1', 'user message2']);\r\nws.publish('user.modified', { field1: 'field1', field2: true, field3: 123 });\r\nws.publish('user.modified', { field1: 'field1', field2: true, field3: 123 }, {\r\n  onSuccess: function () { console.log('User successfully modified'); }\r\n});\r\nws.publish('user.modified', { field1: 'field1', field2: true, field3: 123 }, {\r\n  onSuccess: function () { console.log('User successfully modified'); },\r\n  onError: function (err) { console.log('User modification failed', err); }\r\n});\r\nws.publish('chat.message.received', ['Private message'], null, { eligible: 123456789 });\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\ncall(topicURI[, payload[, callbacks[, advancedOptions]]])\r\n-----------------------------------------------\r\n\r\nMake a RPC call to topicURI. Supports chaining.\r\n\r\nParameters:\r\n\r\n* **topicURI**. Required. A string that identifies the remote procedure to be called.\r\nMust meet a WAMP Spec URI requirements.\r\n* **payload**. RPC data. Optional. May be any single value or array or hash-table object or null.\r\n* **callbacks**. If it is a function - it will be treated as result callback function\r\n             or it can be hash table of callbacks:\r\n\r\n           { onSuccess: will be called with result on successful call\r\n             onError: will be called if invocation would be aborted }\r\n* **advancedOptions**. Optional parameter. Must include any or all of the options:\r\n\r\n           { disclose_me: bool flag of disclosure of Caller identity (WAMP session ID)\r\n                        to endpoints of a routed call\r\n             receive_progress: bool flag for receiving progressive results. In this case onSuccess function\r\n                        will be called every time on receiving result\r\n             timeout: integer timeout (in ms) for the call to finish }\r\n\r\n```javascript\r\nws.call('server.time', null, function (data) { console.log('Server time is ' + d[0]); });\r\n\r\nws.call('start.migration', null, {\r\n    onSuccess: function (data) {\r\n        console.log('RPC successfully called');\r\n    },\r\n    onError: function (err) {\r\n        console.log('RPC call failed!',err);\r\n    }\r\n});\r\n\r\nws.call('restore.backup', { backupFile: 'backup.zip' }, {\r\n    onSuccess: function (data) {\r\n        console.log('Backup successfully restored');\r\n    },\r\n    onError: function (err) {\r\n        console.log('Restore failed!',err);\r\n    }\r\n});\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\ncancel(reqId, callbacks, advancedOptions)\r\n-----------------------------------------------\r\n\r\nRPC invocation cancelling. Supports chaining.\r\n\r\nParameters:\r\n\r\n* **reqId**. Required. Request ID of RPC call that need to be canceled.\r\n* **callbacks**. Optional. If it is a function - it will be called if successfully sent canceling message\r\n            or it can be hash table of callbacks:\r\n\r\n          { onSuccess: will be called if successfully sent canceling message\r\n            onError: will be called if some error occurred }\r\n* **advancedOptions**. Optional parameter. Must include any or all of the options:\r\n\r\n          { mode: string|one of the possible modes:\r\n                  \"skip\" | \"kill\" | \"killnowait\". Skip is default. }\r\n\r\n```javascript\r\nws.call('start.migration', null, {\r\n    onSuccess: function (data) {\r\n        console.log('RPC successfully called');\r\n    },\r\n    onError: function (err) {\r\n        console.log('RPC call failed!',err);\r\n    }\r\n});\r\nstatus = ws.getOpStatus();\r\n\r\nws.cancel(status.reqId);\r\n\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nregister(topicURI, callbacks)\r\n-----------------------------------------------\r\n\r\nRPC registration for invocation. Supports chaining.\r\n\r\nParameters:\r\n\r\n* **topicURI**. Required. A string that identifies the remote procedure to be called.\r\nMust meet a WAMP Spec URI requirements.\r\n* **callbacks**. Required. If it is a function - it will be treated as rpc itself\r\n             or it can be hash table of callbacks:\r\n\r\n           { rpc: registered procedure\r\n             onSuccess: will be called on successful registration\r\n             onError: will be called if registration would be aborted }\r\n\r\nRegistered PRC during invocation will receive two arguments: payload (may be null), and options object. One attribute\r\nof interest in options is \"receive_progress\" (boolean), which indicates, that caller is willing to receive progressive\r\nresults, if possible. RPC can return no result (undefined), or it must return an array with 2 elements:\r\n\r\n* \\[0\\] element must contain options object or {} if not needed. Possible attribute of options is \"progress\": true, which\r\nindicates, that it's a progressive result, so there will be more results in future. Be sure to unset \"progress\"\r\non last result message.\r\n* \\[1\\] element can contain result, which can be a simple value, array or object\r\n\r\n```javascript\r\nvar sqrt_f = function (x) { return [{}, x*x]; };\r\n\r\nws.register('sqrt.value', sqrt_f);\r\n\r\nws.register('sqrt.value', {\r\n    rpc: sqrt_f,\r\n    onSuccess: function (data) {\r\n        console.log('RPC successfully registered');\r\n    },\r\n    onError: function (err) {\r\n        console.log('RPC registration failed!',err);\r\n    }\r\n});\r\n```\r\n\r\nAlso wampy supports rpc with asynchronous code, such as some user interactions or xhr, using promises.\r\nFor using this functionality in old browsers you should use polyfills,\r\nlike [es6-promise](https://github.com/jakearchibald/es6-promise). Check brower support\r\nat [can i use](http://caniuse.com/#search=promise) site.\r\n\r\n```javascript\r\nvar getUserName = function () {\r\n    return new Promise(function (resolve, reject) {\r\n        /* Ask user to input his username somehow,\r\n           and resolve promise with user input at the end */\r\n        resolve([{}, userInput]);\r\n    });\r\n};\r\n\r\nws.register('get.user.name', getUserName);\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nunregister(topicURI, callbacks)\r\n-----------------------------------------------\r\n\r\nRPC unregistration from invocations. Supports chaining.\r\n\r\nParameters:\r\n\r\n* **topicURI**. Required. A string that identifies the remote procedure to be called.\r\nMust meet a WAMP Spec URI requirements.\r\n* **callbacks**. Optional. If it is a function - it will be called on successful unregistration\r\n             or it can be hash table of callbacks:\r\n\r\n           { onSuccess: will be called on successful unregistration\r\n             onError: will be called if unregistration would be aborted }\r\n\r\n```javascript\r\nws.unregister('sqrt.value');\r\n\r\nws.unregister('sqrt.value', {\r\n    onSuccess: function (data) {\r\n        console.log('RPC successfully unregistered');\r\n    },\r\n    onError: function (err) {\r\n        console.log('RPC unregistration failed!',err);\r\n    }\r\n});\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nQuick comparison to other libs\r\n==============================\r\n\r\n| Topic         | Wampy.js | AutobahnJS  |\r\n|-------------- | -------- | ----------- |\r\n| Runs on | browser | browser and NodeJS |\r\n| Dependencies | msgpack5.js (optional) | when.js, CryptoJS (optional) |\r\n| Creating connection | var connection = new Wampy('ws://127.0.0.1:9000/', { realm: 'realm1' }); | var connection = new autobahn.Connection({url: 'ws://127.0.0.1:9000/', realm: 'realm1'}); |\r\n| Opening a connection | connection opens on creating an instance, or can be opened by: connection.connect() | connection.open(); |\r\n| Connection Callbacks | Wampy supports next callbacks: onConnect, onClose, onError, onReconnect. Callbacks can be specified via options object passed to constructor, or via .options() method. | AutobahnJS provides two callbacks: connection.onopen = function (session) { } and connection.onclose = function (reason/string, details/dict) { } |\r\n| WAMP API methods with parameters | While using Wampy you don't have to explicitly specify the payload type (single value, array, object), just pass it to api method. <br/>For example:<br/>ws.publish('chat.message.received', 'user message');<br/>ws.publish('chat.message.received', ['user message1', 'user message2']);<br/>ws.publish('chat.message.received', { message: 'user message'});<br/>Also Wampy is clever enough to understand some specific options, for example, if you specify a success or error callback to publish method, Wampy will automatically set acknowledge flag to true.  | In AutobahnJS you need to use only arrays and objects, as it's specified in WAMP, and also choose right argument position.<br/>For example:<br/>session.publish('com.myapp.hello', ['Hello, world!']);<br/>session.publish('com.myapp.hello', [], {message: 'Hello, world!'});<br/>Also you need to explicitly provide additional options, like {acknowledge: true} |\r\n| Method callbacks | Most of the API methods take a **callbacks** parameter, which is hash-table of posible callbacks | AutobahnJS make use of **Deffered** object, and most of API methods return a deferred object, so you can specify callbacks using .then() method |\r\n| Chaining support | Wampy supports methods chaining.<br/>connection.subscribe(...).publish(...).call(...) |  |\r\n| Transport encoders | json, msgpack (optional) | json |\r\n\r\nWhich one library to use - choice is yours!\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nTests and code coverage\r\n=======================\r\n\r\nWampy.js uses mocha and chai for tests and istanbul for code coverage. You can run both from cli\r\n\r\n```bash\r\n# run tests with mocha (use your own favorite reporter)\r\n> mocha -R spec\r\n# or use standart npm test command\r\n> npm test\r\n\r\n# for code coverage report run\r\n> npm run-script cover\r\n# and then open coverage/lcov-report/index.html\r\n\r\n```\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nCopyright and License\r\n=====================\r\n\r\nWampy.js library is licensed under the MIT License (MIT).\r\n\r\nCopyright (c) 2014 Konstantin Burkalev\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of\r\nthis software and associated documentation files (the \"Software\"), to deal in\r\nthe Software without restriction, including without limitation the rights to\r\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\r\nthe Software, and to permit persons to whom the Software is furnished to do so,\r\nsubject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\r\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\r\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\r\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\nSee Also\r\n========\r\n\r\n* [WAMP specification][]\r\n* [Wiola][] - WAMP Router in Lua on top of nginx/openresty\r\n* [Loowy](https://github.com/KSDaemon/Loowy) - LUA WAMP client\r\n* [msgpack5][] - A msgpack v5 implementation for node.js and the browser,\r\nwith extension point support\r\n* [wampy-cra][] - WAMP Challenge Response Authentication plugin for Wampy.js\r\n\r\n[Back to TOC](#table-of-contents)\r\n\r\n[WAMP]: http://wamp-proto.org/\r\n[WAMP specification]: http://wamp-proto.org/\r\n[Wiola]: http://ksdaemon.github.io/wiola/\r\n[msgpack5]: https://github.com/mcollina/msgpack5\r\n[WAMP Spec CRA]: https://tools.ietf.org/html/draft-oberstet-hybi-tavendo-wamp-02#section-13.7.2.3\r\n[wampy-cra]: https://github.com/KSDaemon/wampy-cra\r\n\r\n[npm-url]: https://www.npmjs.com/package/wampy\r\n[npm-image]: https://img.shields.io/npm/v/wampy.svg?style=flat\r\n\r\n[travis-url]: https://travis-ci.org/KSDaemon/wampy.js\r\n[travis-image]: https://img.shields.io/travis/KSDaemon/wampy.js/dev.svg?style=flat\r\n\r\n[coveralls-url]: https://coveralls.io/github/KSDaemon/wampy.js\r\n[coveralls-image]: https://img.shields.io/coveralls/KSDaemon/wampy.js/dev.svg?style=flat\r\n\r\n[depstat-url]: https://david-dm.org/KSDaemon/wampy.js\r\n[depstat-image]: https://david-dm.org/KSDaemon/wampy.js.svg?style=flat\r\n\r\n[depstat-dev-url]: https://david-dm.org/KSDaemon/wampy.js\r\n[depstat-dev-image]: https://david-dm.org/KSDaemon/wampy.js/dev-status.svg?style=flat\r\n\r\n[gitter-url]: https://gitter.im/KSDaemon/wampy.js\r\n[gitter-image]: https://badges.gitter.im/Join%20Chat.svg\r\n\r\n[license-image]: https://img.shields.io/badge/license-MIT-blue.svg\r\n[license-url]: http://opensource.org/licenses/MIT\r\n\r\n[DefinitelyTyped.org]: http://definitelytyped.org/\r\n",
  "google": "UA-52132189-2",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}